第1章 ：概述
    1、分层：TCP/IP通常被认为是一个四层协议系统
        链路层、网络层、运输层、应用层
        IP属于网络层，在IP层发送数据时，由于网络延时，链路不稳定等因素造成数据包丢失，因此IP协议实现了不可靠传输，为此提出了TCP协议，TCP协议采用确认机制，每次发送一个数据包，都等待对方回复确认，接收到对方回复的确认之后，才认为这个数据包已经到达了，并发送下一个。如果在规定的时间内接收不到对方的确认，那么就认为这个数据包丢失了，发送方就再次发送这个数据包，直到接收到对方的确认为止，因此每个数据包必然会到达对方那里，从而实现了可靠传输。
        UDP为应用程序发送和接收数据报。一个数据报是指从发送方传输到接收方的一个信息单元（例如，发送方指定的一定字节数的信息）。但是与 T C P不同的是， U D P是不可靠的，它不能保证数据报能安全无误地到达最终目的。

        IP是网络层上的主要协议，同时被 TCP和UDP使用。 TCP和UDP的每组数据都通过端系统和每个中间路由器中的IP层在互联网中进行传输。
        有三类I P地址：单播地址（目的为单个主机）、广播地址（目的端为给定网络上的所有主机）以及多播地址（目的端为同一组内的所有主机）

    2、域名： 域名系统（DNS）是一个分布的数据库，由它来提供 I P地址和主机名之间的映射信息
    3、封装：当应用程序用TCP传送数据时，数据被送入协议栈中，然后逐个通过每一层直到被当作一串比特流送入网络,其中每一层对收到的数据都要增加一些首部信息
    4、分用：当目的主机收到一个以太网数据帧时，数据就开始从协议栈中由底向上升，同时去掉各层协议加上的报文首部。
    5、端口号：TCP和UDP采用端口号来识别应用程序(用于区分服务的端口) 端口号的范围从0到65535 比如用于浏览网页服务的80端口，用于FTP服务的21端口等

第2章 ：链路层
    1、三个作用
        （1）为IP模块发送和接收IP数据报；
        （2）为ARP模块发送 ARP请求和接收ARP应答
        （3）为RARP发送RARP请求和接收RARP应答

第3章 ：网际协议
    1、IP是TCP/IP协议族最核心的协议，TCP、UDP、ICMP及IGMP数据都以IP数据报格式传输。
       不可靠：不能保证IP数据报能成功地到达目的地，需要通过上层TCP来保证可靠性
       无连接：IP数据报可以不按发送顺序接收。如果一信源向相同的信宿发送两个连续的数据报（先是 A，然后是 B），每个数据报都是独立地进行路由选择，可能选择不同的路线，因此 B可能在A到达之前先到达

    2、IP首部
    3、IP路由选择 如果目的主机在直接相连的网络上，那么就把数据报直接传给目的主机，否则传给默认路由器
       路由选择决策时，主机和路由器都使用路由表。在表中有三种类型的路由：特定主机型、特定网络型和默认路由型。路由表中的表目具有一定的优先级。在选择路由时，主机路由优先于网络路由，最后在没有其他可选路由存在时才选择默认路由

第4章 ：ARP地址解析协议和RARP逆地址解析协议
    1、32位Internet地址 和 48位以太网地址(MAC地址) 相互转换

第5章 ：ICMP Internet控制报文协议
    1、ICMP经常被认为是IP层一个组成部分，它传递差错报文以及其他需要注意的信息，ICMP报文通常被IP层或更高层协议使用。一些ICMP报文把差错报文返回给用户

第6章 ：UDP: 用户数据报协议
    1、UDP是一个简单的面向数据报的运输层协议：进程的每个输出操作都正好产生一个 UDP数据报，并组装成一份待发送的 I P数据报。
       UDP不提供可靠性：它把应用程序传给IP层的数据发送出去，但是并不保证它们能到达目的地。

第7章 ：广播和多播
    单播地址、广播地址和多播地址
    广播和多播仅应用于 UDP，它们对需将报文同时传往多个接收者的应用来说十分重要
    TCP是一个面向连接的协议，它意味着分别运行于两主机（由 I P地址确定）内的两进程（由端口号确定）间存在一条连接

    单播:每个以太网帧包含源主机和目的主机的以太网地址（ 48bit）。通常每个以太网帧仅发往单个目的主机，目的地址指明单个接收接口.
    广播:有时一个主机要向网上的所有其他主机发送帧
    组播:处于单播和广播之间：帧仅传送给属于多播组的多个主机

第8章 ：DNS域名系统
    域名系统（DNS）是一种用于 TCP/IP应用程序的分布式数据库，它提供主机名字和 I P地址之间的转换
    DNS基础: 命名树上任何一个结点的域名就是将从该结点到最高层的域名串连起来，
             中间使用一个点“.”分隔这些域名（注意这和 Unix文件系统路径的形成不同，文件路径是由树根依次向下的形成的）。域名树中的每个结点必须有一个唯一的域名，但域名树中的不同结点可使用相同的标识。

第9章 ：TFTP 简单文件传送协议
    TFTP是一个简单的协议，适合于只读存储器，仅用于无盘系统进行系统引导


*第10章 ：TCP传输控制协议
    TCP提供一种面向连接的、可靠的字节流服务
    1、TCP : 面向连接意味着两个使用 T C P的应用（通常是一个客户和一个服务器）在彼此交换数据之前必须先建立一个 TCP连接
       在一个TCP连接中，仅有两方进行彼此通信。在第 1 2章介绍的广播和多播不能用于 TCP

    2、TCP通过下列方式来提供可靠性
       应用数据被分割成 TCP认为最适合发送的数据块,应用程序产生的数据报长度将保持不变。由 TCP传递给IP的信息单位称为报文段或段
       当TCP发出一个段后，它启动一个定时器，等待目的端确认收到这个报文段。如果不能及时收到一个确认，将重发这个报文段
       当TCP收到发自 TCP连接另一端的数据，它将发送一个确认
       TCP将保持它首部和数据的检验和.这是一个端到端的检验和，目的是检测数据在传输过程中的任何变化。如果收到段的检验和有差错， TCP将丢弃这个报文段和不确认收到此报文段
       既然TCP报文段作为 IP数据报来传输，而 IP数据报的到达可能会失序，因此 TCP报文段的到达也可能会失序;既然I P数据报会发生重复， T C P的接收端必须丢弃重复的数据
       TCP还能提供流量控制。 TCP连接的每一方都有固定大小的缓冲空间

*第11章 TCP连接的建立与终止
    1、TCP是一个面向连接的协议。无论哪一方向另一方发送数据之前，都必须先在双方之间建立一条连接。本章将详细讨论一个 T C P连接是如何建立的以及通信结束后是如何终止的。这种两端间连接的建立与无连接协议如 U D P不同。
    2、连接的建立与终止 ：
       （1）tcpdump ： 这个命令产生TCP报文段的tcpdump输出
       （2）tcp首部 ：
            标示    3字符缩写     描述
            S       SYN           同步序号
            F       FIN           发送方完成数据发送
            R       RST           复位连接
            P       PSH           尽可能快地将数据发送接收进程
            .                     以上四个标示比特均设置为0
            tcp首部中的其他两个标示比特 ack和urg，tcpdump将作特殊显示

       (3)创建和关闭连接 : tcpdump输出
            建立连接: 三次握手
            1    0.0         svr4.1037 > bsdi.discard :   S   1415531521:1415531521（0） win 4096 <mss 1024>
            2    0.002402    bsdi.discard > svr4.1037 :   S   1823083521:1823083521（0） ack 1415531522 win 4096  <mss 1024>
            3    0.007224    svr4.1037 > bsdi.discard :   .   ack 1823083522 win 4096

            断开连接: 四次握手
                终止一个连接要经过 4次握手。这由 T C P的半关闭（ h a l f -c l o s e）造成的。既然一个 T C P连接是全双工（即数据在两个方向上能同时传递），因此每个方
                向必须单独地进行关闭。这原则就是当一方完成它的数据发送任务后就能发送一个 F I N来终止这个方向连接
                当一端收到一个FIN，它必须通知应用层另一端几经终止了那个方向的数据传送。发送F I N通常是应用层进行关闭的结果
            4    4.155441    svr4.1037 > bsdi.discard :   F   1415531522:1415531522(0) ack 1823083522 win 4096
            5    4.156747    bsdi.discard > svr4.1037 :   .   ack 1415531523 win 4096
            6    4.158144    bsdi.discard > svr4.1037 :   F   1823083522: 1823083522(0) ack 1415531523 win 4096
            7    4.180662    svr4.1037  >bsdi.discard :   .   ack 1823083523 win 4096

       (4) 连接建立的超时 : 连接超时，会重试
       (5) 最大报文段长度mss : 表示tcp传往另一端的最大块数据的长度。当一个连接建立时，连接的双方都要告知各自的mss
       (6) TCP的半关闭： TCP提供了连接的一端在结束它的发送后还能接受来自另一端数据的能力。这就是所谓的半关闭。
       (7) 服务端口号
           netstat -a -n
           -a标示将显示网络中的所有主机端，而不仅仅是处于ESTABLISHED的主机端
           -n标示将以点分十进制的形式显示IP，而不是通过DNS将地址转化为主机名
       (8) 限定的本地IP地址

*第十二章 TCP的数据传输
    按照分组数量计算： 有一半的TCP报文段包含成块数据(大)，另一半包含交互数据（小）
    TCP对于这两类数据的传输过程是不相同的
    1、交互数据流
       （1）来自客户的交互按键；
       （2）来自服务器的按键确认；来自服务器的按键回显；
       （3）来自客户的按键回显确认

    2、成块数据流 : 数据发送方在发送下一个数据块之前需要等待接收对已发送数据的确认

*第十三章 TCP超时与重传
    1、TCP提供可靠的运输层。它使用的方法之一就是确认从另一端收到的数据。但数据和确认都有可能会丢失。 TCP通过在发送时设置一个定时器来解决这种问题。如果当定时器溢出时还没有收到确认，它就重传该数据
       建立tcp连接
           1、bsdi.1029>svr4.discard: S 1747921409:1747921409(0) win 4096<mss 1024>
           2、svr4.discard>bsdi.1029: S 3416685569:3416685569(0) ack 1747921410 win 4096<mss 1024>
           3、bsdi.1029>svr4.discard: . ack 1 win 4096
       tcp连接正常发送数据
           4、bsdi.1029>svr4.discard: P 1:15(14) ack 1 win 4096
           5、svr4.discard>bsdi.1029: . ack 15 win 4096
       tcp连接断开发送数据,多次重试后，最终放弃
           6、bsdi.1029>svr4.discard: P 15:23(8) ack 1 win 4096
           7、bsdi.1029>svr4.discard: P 15:23(8) ack 1 win 4096
           8、bsdi.1029>svr4.discard: P 15:23(8) ack 1 win 4096
           9、bsdi.1029>svr4.discard: P 15:23(8) ack 1 win 4096
           10、bsdi.1029>svr4.discard: P 15:23(8) ack 1 win 4096
           11、bsdi.1029>svr4.discard: R 15:23(0) ack 1 win 4096





